<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main Page</title>
    <style>
        #loginForm {
            display: none;
        }
    </style>
</head>
<body>

<div id="loggedInUser">
    <!-- 아이디가 표시될 영역 -->
</div>

<div id="loginForm">
    <!-- 로그인 폼 -->
    <label for="username">아이디:</label>
    <input type="text" id="username" name="username">
    <button onclick="login()">로그인</button>
</div>

<script>
    // 로그인 상태 확인 함수
    function checkLoginStatus() {
        // 여기에서 실제 로그인 상태를 확인하는 로직을 추가할 수 있습니다.
        // 예를 들어, 쿠키, 세션, 또는 서버와의 통신 등을 통해 로그인 상태를 확인합니다.

        // 여기에서는 간단한 예시로 true 또는 false 값을 반환하도록 하겠습니다.
        return false;
    }

    // 페이지 로드 시 로그인 상태 확인 및 화면 업데이트
    window.onload = function () {
        updateUI();
    };

    // 로그인 버튼 클릭 시 호출되는 함수
    function login() {
        // 여기에서 실제 로그인 처리 로직을 추가할 수 있습니다.
        // 로그인이 성공하면 적절한 방법으로 로그인 상태를 유지합니다.
        // 여기에서는 간단한 예시로 쿠키를 사용하여 로그인 상태를 유지합니다.

        // 쿠키 설정 (실제로는 더 강력한 보안 방법을 사용해야 합니다)
        document.cookie = "loggedIn=true; path=/";

        // 화면 업데이트
        updateUI();
    }

    // 로그아웃 버튼 클릭 시 호출되는 함수
    function logout() {
        // 여기에서 실제 로그아웃 처리 로직을 추가할 수 있습니다.
        // 여기에서는 간단한 예시로 쿠키를 사용한 예제를 제공합니다.

        // 쿠키 삭제
        document.cookie = "loggedIn=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";

        // 화면 업데이트
        updateUI();
    }

    // 화면 업데이트 함수
    function updateUI() {
        var loggedInUserDiv = document.getElementById("loggedInUser");
        var loginFormDiv = document.getElementById("loginForm");

        if (checkLoginStatus()) {
            // 로그인 상태일 때
            var username = getCookie("username"); // 쿠키에서 아이디 가져오기 (실제로는 더 강력한 방법을 사용해야 함)
            loggedInUserDiv.innerHTML = "안녕하세요, " + username + "님! <button onclick='logout()'>로그아웃</button>";
            loginFormDiv.style.display = "none"; // 로그인 폼 숨기기
        } else {
            // 로그인 상태가 아닐 때
            loggedInUserDiv.innerHTML = "";
            loginFormDiv.style.display = "block"; // 로그인 폼 보이기
        }
    }

    // 쿠키에서 특정 키의 값을 가져오는 함수 (실제로는 더 강력한 방법을 사용해야 함)
    function getCookie(name) {
        var match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        if (match) return match[2];
    }

    var userDatabase = [
    { username: 'john_doe', password: 'password123' },
    // 다른 사용자 정보들...
];

// 로그인 상태 확인 함수
function checkLoginStatus() {
    // 여기에서 실제로는 서버와의 통신이나 사용자 인증 로직을 추가해야 합니다.
    // 아래는 간단한 예시로 사용자가 특정 아이디와 패스워드를 입력하여 로그인하는 것을 시뮬레이션합니다.

    // 사용자가 입력한 아이디와 패스워드
    var inputUsername = document.getElementById("username").value;
    var inputPassword = document.getElementById("password").value;

    // 데이터베이스에서 일치하는 사용자 찾기
    var user = userDatabase.find(function (u) {
        return u.username === inputUsername && u.password === inputPassword;
    });

    // 사용자가 존재하면 로그인 성공
    return !!user;
}
</script>

</body>
</html>
